const assert = require("assert");
const watchdog = require("./watchdog");

describe("Node Detection Watchdog", () => {
  it("should detect when the node goes down", (done) => {
    watchdog.on("down", () => {
      done();
    });
    // simulate the node going down
    watchdog.emit("down");
  });

  it("should detect when the node comes back up", (done) => {
    watchdog.on("up", () => {
      done();
    });
    // simulate the node coming back up
    watchdog.emit("up");
  });

  it("should detect when the node experiences a crash", (done) => {
    watchdog.on("crash", () => {
      done();
    });
    // simulate the node experiencing a crash
    watchdog.emit("crash");
  });

  it("should detect when the node experiences network issues", (done) => {
    watchdog.on("network-issues", () => {
      done();
    });
    // simulate the node experiencing network issues
    watchdog.emit("network-issues");
  });
});